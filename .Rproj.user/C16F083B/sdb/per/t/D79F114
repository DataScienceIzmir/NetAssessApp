{
    "contents" : "netAssess.shinyBindings = {};\n\nnetAssess.shinyBindings.customAnchor = new Shiny.InputBinding();\n  $.extend(netAssess.shinyBindings.customAnchor, {\n    find: function(scope) {\n      return $(scope).find(\".shiny-custom-anchor\");\n    },\n    getValue: function(el) {\n      return $(el).data(\"anchorData\");\n    },\n    setValue: function(el, value) {\n      $(el).data(\"anchorData\", value)\n      $(el).trigger(\"anchorupdate\");\n    },\n    subscribe: function(el, callback) {\n      $(el).on(\"anchorupdate\", callback)\n    },\n    unsubscribe: function(el) {\n      $(el).off(\"anchorupdate\")\n    },\n    initialize: function(el) {\n      el.updateAnchor = function(data) {\n        $(this).data(\"shinyInputBinding\").setValue(this, data);\n      }    \n    }\n    \n  })\nShiny.inputBindings.register(netAssess.shinyBindings.customAnchor);\n\nShiny.addCustomMessageHandler(\"updateVisibleMonitors\", function(data) {\n  netAssess.layerGroups.sites.setVisibleSites(data);\n})\n\nShiny.addCustomMessageHandler(\"displayPredefinedArea\", function(data) {\n  \n  var x = L.featureGroup(null);\n  for(var i = 0; i < data.coords.length; i++) {\n    L.polygon(data.coords[i], {fill: false}).addTo(x)\n  }\n\n\tnetAssess.draw.disable();\n\tnetAssess.setAOI(x);\n  \n});\n\nShiny.addCustomMessageHandler(\"updateAreaServed\", function(data) {\n\n  var areaServed = netAssess.layerGroups.areaServed;\n  areaServed.clearLayers();\n  \n  var areaSelectStyle = {fillColor: '#666', weight: 2, opacity: 0.75, color: 'white', dashArray: '3', fillOpacity: 0.4}\n  \n  for(var i = 0; i < data.length; i++) {\n\n    if(data[i].coords.length == 1) {\n      var a = L.polygon(data[i].coords[0], {id: data[i].id}).addTo(areaServed)\n    } else {\n      var a = L.multiPolygon([data[i].coords], {id: data[i].id}).addTo(areaServed)\n    }\n\n  \ta.setStyle(areaSelectStyle)\n\t\t\t.on(\"mouseover\", function(e) {\n\t\t\t\tvar layer = e.target;\n\t\t\t\tlayer.setStyle({\n\t\t\t\t\tweight: 5,\n\t\t\t\t\tcolor: '#666',\n\t\t\t\t\tdashArray: '',\n\t\t\t\t\tfillOpacity: 0.7\n\t\t\t\t});\n\t\t\t\tif(!L.Browser.id && !L.Browser.opera) {\n\t\t\t\t\tlayer.bringToFront();\n          netAssess.layerGroups.sites.bringToFront();\n          netAssess.layerGroups.newSites.bringToFront();\n          netAssess.layerGroups.rembias.bringToFront();\n          netAssess.layerGroups.cormap.bringToFront();\n\t\t\t\t}\n\t\t\t})\n\t\t\t.on(\"mouseout\", function(e) {\n\t\t\t\te.target.setStyle(areaSelectStyle);\n\t\t\t})\n\t\t\t.on(\"click\", function(e) {\n\t\t\t\tvar layer = e.target;\n\t\t\t\tif(layer.hasOwnProperty(\"options\")) {\n          document.getElementById(\"clickedAreaServed\").updateAnchor(layer.options.id);\n\t\t\t\t} else if(layer.hasOwnProperty(\"_options\")) {\n          document.getElementById(\"clickedAreaServed\").updateAnchor(layer._options.id);\n\t\t\t\t}\n        var $param = $(\"#paramOfInterest\").val();\n        var $thresh = $(\"#areaServedThreshold\");\n        if($param == \"44201\") {\n          $thresh.html(\"(\" + $(\"#ozoneNAAQS\").val() + \")\");\n        } else if([\"88101\", \"88502\"].indexOf($param) != -1) {\n          $thresh.html(\"(35&mu;g/m<sup>3</sup>)\");\n        } else {\n          $thresh.html(\"\");\n        }\n        netAssess.floaters.areaServed.open();\n\t\t\t\t$(\"#map\").trigger(\"areaClick\")\n\t\t\t})\n      \n    netAssess.layerGroups.sites.bringToFront();\n    netAssess.layerGroups.newSites.bringToFront();\n    netAssess.layerGroups.rembias.bringToFront();\n    netAssess.layerGroups.cormap.bringToFront();\n    netAssess.loading.hide();\n      \n  }\n\n})\n\nShiny.addCustomMessageHandler(\"updateTrendChart\", function(data) {\n  $(\".popup-trend\").find(\"img\").attr(\"src\", data)\n})\n\nShiny.addCustomMessageHandler(\"rembiasUpdate\", function(data) {\n  netAssess.updateBiasLayer(data);\n})\n\nShiny.addCustomMessageHandler(\"showCormat\", function(data) {\n  netAssess.loading.hide();\n  netAssess.floaters.cormat.open();\n})\n\nShiny.addCustomMessageHandler(\"loading\", function(data) {\n  if(data == \"show\") {\n    netAssess.loading.show();\n  } else {\n    netAssess.loading.hide();\n  }\n})\n\nShiny.addCustomMessageHandler(\"updateCorMap\", function(data) {\n  netAssess.updateCorLayer(data)\n})\n\nShiny.addCustomMessageHandler(\"showAlert\", function(data) {\n  netAssess.showAlert(data.header, data.body)\n})",
    "created" : 1426271654861.000,
    "dirty" : false,
    "encoding" : "ISO8859-1",
    "folds" : "",
    "hash" : "3868673062",
    "id" : "D79F114",
    "lastKnownWriteTime" : 1426271696,
    "path" : "C:/R/NetAssessApp/www/js/netassess-shiny.js",
    "project_path" : "www/js/netassess-shiny.js",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "js"
}