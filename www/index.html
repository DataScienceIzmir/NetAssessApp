<!doctype html>

<html>

	<head>

		<meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <script type="application/shiny-singletons"></script>
	
		<title>NetAssess</title>

    <script src="shared/jquery.js" type="text/javascript"></script>
    <script src="shared/shiny.js" type="text/javascript"></script>
    
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700|Roboto+Condensed:400,700' rel='stylesheet' type='text/css'>
		
		<link type = "text/css" rel = "stylesheet" href = "shared/shiny.css" />
		
		<link type = "text/css" rel = "stylesheet" href = "css/leaflet.css" />
		<link type = "text/css" rel = "stylesheet" href = "css/leaflet.contextmenu.css" />
		<link type = "text/css" rel = "stylesheet" href = "css/leaflet.draw.css" />
		<link type = "text/css" rel = "stylesheet" href = "css/L.Control.Sidebar.css" />
		<link type = "text/css" rel = "stylesheet" href = "css/font-awesome.min.css" />
    <link type = "text/css" rel = "stylesheet" href = "css/select2.css" />

		<link type = "text/css" rel = "stylesheet" href = "css/netassess.css" />

	</head>

	<body class = "loading">

    <div id = 'curtain'></div>
    
		<div id = "menu-bar" class = "small">
    
      <table class = "title-block">
  			<tr><td class = "title">NetAssess <span class = "version">v0.3a</span></td></tr>
  		  <tr><td class = "subtitle" colspan = 3>Ambient Air Monitoring Network Assessment Tool</td></tr>
      </table>
      
      <span class = "right-items">
        <div class = "menu-bar-item">
          <select id="expParam"></select>
        </div>
        <button class = "menu-bar-button" id = "aoi_button" title = "Set Area of Interest">
          <i class = "fa fa-crosshairs"></i>
        </button>
        <button class = "menu-bar-button" id = "new_site_button" title = "Add New Site">
          <i class = "fa fa-plus-circle"></i>
        </button>
        <span class = "v-divide"></span>
        <button class = "menu-bar-button action-button" id = "cormatButton" title = "Calculate Correlations">
          <span style = "font-family: serif; font-weight: bold; font-size: 24px; position: relative; top: -5px;">&rho;</span>
        </button>
        <button class = "menu-bar-button action-button" id = "areaServedCalcButton" title = "Calculate Area Served">
          <span class = "valign"><img src = "images/area_served.png" /></span>
        </button>
        <button class = "menu-bar-button" id = "removebias" title = "Remove Bias">
          <i class = "fa fa-birthday-cake"></i>
        </button>
        <span class = "v-divide"></span>
        <button class = "menu-bar-button" id = "aoiZoom" title = "Zoom to Area of Interest">
          <i class = "fa fa-binoculars"></i>
        </button>
        <button class = "menu-bar-button" id = "full_extent" title = "Zoom to Continental US">
          <span class = "valign"><img src = "images/cont_us.png"></span>
        </button>
        <span class = "v-divide"></span>
        <button class = "menu-bar-button" id = "downloadButton" title = "Download Data Table">
          <span class = "valign"><img src = "images/csv.png" /></span>
        </button>
        <span class = "v-divide"></span>
        <button class = "menu-bar-button" id = "resetApp" title = "Reset App">
          <i class = "fa fa-undo"></i>
        </button>
      </span>
		</div>
    <!-- These divs serve as anchors to bind custom shiny inputs. I haven't
         found a better way to do this -->
    <div id = "monitorSelect"></div>
    <div id = "selectedSites"></div>
    <div id = "clickedAreaServed"></div>
    <div id = "visibleSites"></div>
    <div id = "areaOfInterest"></div>
    <div id = "newSites"></div>
    <div id = "popupID"></div>
    <div id = "correlations"></div>
    <div id = "trendChart" class = "shiny-plot-output"></div>
    <a class = "shiny-download-link" id = "downloadData" href = "" target = "_blank">Hi :)</a>
    <div id = "tutorial" class = "tutorial" style = "display: none;">
      <div class = "tutorial-body">
        <div class = "header">Welcome to NetAssess!</div>
        <div class = "content"></div>
        <div class = "tutCookie">
          <input type = "checkbox" id = "tutGone" />
          <label for = "tutGone">Don't show again</label>
        </div>
        <button id = "tutNext">Next</button>
      <div class = "navigation">
        <a class = 'close icon'><i class = 'fa fa-close'></i></a>
      </div>
        
      </div>
      <div class = "tutorial-arrow-border"></div>
      <div class = "tutorial-arrow"></div>  
    </div>
        
		<div id = "map"></div>

		<div id = "settings-sb" class = "sidebar">
			<h1><i class="fa fa-cogs  fa-fw"></i>Settings</h1>
      <p>These setting allow you to customize how the NetAssess App works. Please see the Help file for additional information about how these setting will effect the NetAssess App.</p>
      <p class = "header">Area Served</p>
      <p>The area served tool allows you to compile information about the area surrounding monitoring locations.</p>
      <table class = "options-table">
        <tr>
          <td><label for = "areaServedClipping">Clip Area Served Polygons on: </label></td>
          <td>
              <select id = "areaServedClipping">
                <option value = "none">No Clipping</option>
                <option value = "border" selected = selected>US Border (default)</option>
                <option value = "aoi">Area of Interest</option>
              </select>
          </td>
        </tr>
        <tr>
          <td><label for = "areaServedType">Area Served Type: </label></td>
          <td>
              <select id = "areaServedType" disabled>
                <option value = "voronoi" selected = selected>Voronoi Polygons</option>
                <option value = "circles">Circles</option>
              </select>
          </td>
        </tr>
        <tr>
          <td><label for = "circleSize">Radius of Circles: </label></td> 
          <td><input id = "circleSize" disabled type = "text" size = 5 value = "50"/> km</td>
        </tr>
      </table>
      <p class = "header">Exceedence Probability</p>
      <p>Exceedence Probability is the probability that an area will exceed a given threshold at least one day in a year. The threshold for ozone can be adjusted below.</p>
      <table class = "options-table">
        <tr>
          <td><label for = "ozoneNAAQS">Ozone Threshold: </label></td>
          <td>
            <select id = "ozoneNAAQS" title = >
              <option value = "65ppb">65 ppb</option>
              <option value = "70ppb">70 ppb</option>
              <option value = "75ppb" selected = selected>75 ppb</option>
            </select>
          </td>
        </tr>
      </table> 
		</div>
		
		<div id = "help-sb" class = "sidebar">
			<h1><i class="fa fa-question  fa-fw"></i> Help</h1>
      <p class = "header">Tour</p>
      <p>The tour is meant to give you a basic overview of how the app should work</p>
      <div style = "text-align: center"><button id = "openTour" style = 'text-align: center'>Open Tour</button></div>
      <p class = "header">Navigation</p>
      <p>There are many ways to navigate the map in Netassess:</p>
      <ul>
        <li><div class = "menu-bar-button" style = "background-color: #2c3e50;"><span class = "valign"><img src = "images/cont_us.png"></span>
        </div> - Zoom out to view entire continental United States</li>
        <li><div class = "menu-bar-button" style = "background-color: #2c3e50;"><i class = "fa fa-binoculars"></i></div> - Zoom in to your area of interest</li>
        <li><i>double-click</i> - Double click the mouse on the map to zoom in and center on that point.</li>
        <li><i>shift + drag</i> - Hold down <i>shift</i> while clicking and dragging to zoom in on the area covered.</li>
      </ul>
		</div>
		
		<div id = "about-sb" class = "sidebar">
			<h1><i class="fa fa-info  fa-fw"></i> About</h1>
      The NetAssess app was developed by a <a href = "http://www.ladco.org/" target="_blank">LADCO</a> workgroup consisting of people from Indiana, Minnesota, and Michigan. It is an update of and improvement to the <a href = "http://www.epa.gov/ttnamti1/network-assessment.html" target="_blank">original Network Assessment tools</a> developed by Mike Rizzo for the 2010 5-year Network Assessment. This tool is open source and all source code is available on <a href = "https://github.com/LADCO/NetAssessApp" target="_blank">GitHub</a>.
      <p class = "header">Credits</p>
      <ul>
        <li><strong>Eric Bailey</strong> - Web Application, Area Served, and New Sites</li>
        <li><strong>Nathan Byers</strong> - Exceedence Probabilities</li>
        <li><strong>Cassie McMahon</strong> - Correlation Matrix</li>
        <li><strong>Amy Robinson</strong> - Removal of Bias</li>
      </ul>
      <p>Special thanks to Donna Kenski for facilitating the creation of this tool.</p>
      
      <p class = "header">Software</p>
      <p>Many different open source software solutions were used to create this application. Please contact <a href = "mailto:ebailey@idem.in.gov">Eric Bailey</a> if you have any questions about how any of this software was used.</p>
      <ul>
        <li><a href = "http://www.r-project.org/" target="_blank">R</a></li>
        <li><a href = "http://shiny.rstudio.com" target="_blank">Shiny</a></li>
        <li><a href = "http://leafletjs.com/" target="_blank">Leaflet</a></li>
        <li>...</li>
      </ul>
		</div>
		
    <div class = "loading"><i class = "fa fa-spinner fa-spin loading"></i></div>
    
    <div id = "aoi">
      <p class = "header">Select a geography</p>
			<p>Use the buttons below to define your own area of interest:</p>
			<div class = "na-draw-buttons">
				<button id = "draw_polygon" class = "na-draw-button" title = "Define a Polygon"><img src = "images/glyphicons_096_vector_path_polygon.png" /></button>
				<button id = "draw_rectangle" class = "na-draw-button" title = "Define a Rectangle"><img src = "images/glyphicons_094_vector_path_square.png" /></button>
  			<button id = "cancel_draw" class = "na-draw-button" title = "Cancel Drawing"><img src = "images/glyphicons_197_remove.png" /></button>
			</div>
			<p class = "header">Select predefined area</p>
			<p>Select an area type with the radio buttons, then select a specific area from the dropdown menu:</p>
			<div class = "na-select-area">
				<div id="areaSelect" class="control-group shiny-input-radiogroup">
				  <label class="control-label" for="areaSelect"><strong>Area Type:</strong></label>
				  <label class="radio inline">
					<input type="radio" name="areaSelect" id="areaSelect1" value="State"/>
					<span>State</span>
				  </label>
				  <label class="radio inline">
					<input type="radio" name="areaSelect" id="areaSelect2" value="CBSA" />
					<span>CBSA</span>
				  </label>
				  <label class="radio inline">
					<input type="radio" name="areaSelect" id="areaSelect3" value="CSA" />
					<span>CSA</span>
				  </label>
          <select id="areaSelectSelect"></select><button id = "areaSelectZoom" style = "height: 30px; width: 30px; margin-left: 10px;"><i class="fa fa-binoculars"></i></button>
        </div>
    </div>
  </div>
    
  <div id = "areainfo">
    <p class = "header">Parameter</p>
    <div id = "areaServedParameter" class = "shiny-html-output area-info-text"></div>
    <div class = "floater-rollup">
      <p class = "header">Geography</p>
      <div>
        <div id = "areaServed" class = "shiny-html-output area-info-text"></div>
      </div>
    </div>
    
    <div class = "floater-rollup">
      <p class = "header">Demographics</p>
      <div style = "padding-bottom: 10px;">
        <div id = "totalPopServed" class = "shiny-html-output area-info-text"></div>
        <div id = "agePlot"        class = "shiny-plot-output" style="width: 175px; height: 200px; text-align: center; display: inline-block; float: left;"></div>
        <div id = "racePlot"       class = "shiny-plot-output" style="width: 175px; height: 200px; text-align: center; display: inline-block; float: right;"></div>          
      </div>
    </div>
    
    <div class = "floater-rollup" id = "exProb">
      <p class = "header">Exceedence Probability <span id = "areaServedThreshold">75ppb</span></p>
      <div>
        <div id = "naaqsProb" class = "shiny-html-output area-info-text"></div>
      </div>
    </div>
    
  </div>
    
  <div id = "cormat">
    <p class = "header">
      Correlation Matrix
      <a class = "shiny-download-link img-download-link" id = "downloadCorMat" title = "Download Correlation Matrix Data" href = "" target = "_blank">
        <i class = "fa fa-download img-download-icon"></i>
      </a>
    </p>
    <div id = "corplot" class = "shiny-plot-output" style = "width: 100%; text-align: center;"></div>
    <p style = "font-size: 0.75em">To save chart, right click and select <i>Save Image As</i></p>
  </div>
    
  <div id = "new_site">
    <table>
      <tr>
        <td><label for = "ns_name">Site Name</label></td>
        <td><input type = "text" name = "ns_name" id = "ns_name" /></td>
      </tr>
    </table>
    <p class = "header">Location</p>
    <table>
      <tr>
        <td><label for = "ns_lat">Latitude</label></td>
        <td><input type = "text" name = "ns_lat" id = "ns_lat" /></td>
      </tr>
      <tr>
        <td><label for = "ns_lng">Longitude</label></td>
        <td><input type = "text" name = "ns_lng" id = "ns_lng" /></td>
      </tr>
      <tr>
        <td><label for = "ns_state">State</label></td>
        <td><input type = "text" name = "ns_state" id = "ns_state" /></td>
      </tr>
      <tr>
        <td><label for = "ns_county">County</label></td>
        <td><input type = "text" name = "ns_county" id = "ns_county" /></td>
      </tr>
      <tr>
        <td><label for = "ns_census">Census Tract</label></td>
        <td><input type = "text" name = "ns_census" id = "ns_census" /></td>
      </tr>
    </table>
    <p class = "header" style = "margin-bottom: 10px;">Parameters</p>
    <select id = "new_site_parameters" multiple size = 4></select>
    <button style = "float: right; margin-top: 10px;" id = "new_site_add">Add Site</button>
    <button style = "float: right; margin-top: 10px;" id = "cancel_site_add">Cancel</button>
  </div>
    
  <div id = "popup">
    <img id = "big-chart" style = "width: 100%;"></img>
    <p style = "font-size: 0.75em">To save chart, right click and select <i>Save Image As</i></p>
  </div>
    
  <div id = "legend">
    <table>
      <tr>
        <td style = "text-align: center"><div class = "site-icon" style = "display: inline-block; margin-top: auto !important; margin-left: auto !important;"></div></td>
        <td>Existing Site</td>
        <td><div class = "site-icon selected" style = "display: inline-block; margin-top: auto !important; margin-left: auto !important;"></div></td>
        <td>Existing Site (selected)</td>
      </tr>
      <tr>
        <td><div class = "new-site-icon" style = "display: inline-block; margin-top: auto !important; margin-left: auto !important;"></div></td>
        <td>New Site</td>
        <td><div class = "new-site-icon selected" style = "display: inline-block; margin-top: auto !important; margin-left: auto !important;"></div></td>
        <td>New Site (selected)</td>
      </tr>
      <tr>
        <td>
          <svg width = "25" height = "25">
            <rect x = "5" y = "5" width = "16" height = "16" fill-opacity="0.2" fill="#0033ff" stroke-width="4" stroke-opacity="0.5" stroke="#0033ff" stroke-linecap="round" stroke-linejoin="round"></rect>
          </svg>
        </td>
        <td>Area of Interest</td>
        <td>
          <svg width = "25" height = "25">
            <rect x = "5" y = "5" width = "16" height = "16" fill-opacity="0.4" fill="#666" stroke-width="2" stroke-opacity="0.75" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="3"></rect>
          </svg>
        </td>
        <td>Area Served Polygon</td>
      </tr>
      
      <tr>
        <td colspan = "4" style = "text-align: left; padding-top: 5px; border-top: solid 1px black;">Exceedence Probability</td>
      </tr>
      <tr>
        <td colspan = "4" style = "text-align: left"><img src = "images/probLegend.png" /></td>
      </tr>
    </table>
    
    
    
  </div>
      
  <div id = "alert">
    <div id = "alert-heading">Heading</div>
    <span id = "alert-body">Main Body of Alert</span>
    <a id = 'alert-close'><i class = 'fa fa-close'></i></a>
  </div>
<!--  <script>L_PREFER_CANVAS = true;</script> -->
  <script src = "js/leaflet.js"></script>
	<script src = "js/esri-leaflet.js"></script>
	<script src = "js/leaflet.draw.js"></script>
	<script src = "js/leaflet.contextmenu.js"></script>
	<script src = "js/L.Control.Sidebar.js"></script>
	<script src = "js/easy-button.js"></script>
	<script src = "js/select2.min.js"></script>
  <script src = "js/floaters.js"></script>
  
  <script src = "js/netassess-setup.js"></script>
  <script src = "js/netassess-shiny.js"></script>
	<script src = "js/netassess.js"></script>
  <script src = "js/netassess-events.js"></script>
  
  <script src = "js/tutorial.js"></script>

  </body>

</html>